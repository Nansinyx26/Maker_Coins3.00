<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Atualizar Coins - Maker Coin System</title>
  <link href="css/style.css" rel="stylesheet" />
</head>
<body>
  <!-- Contador -->
  <div id="sala-info">
    <span id="contador-nomes">Nomes: 0</span>
    <span id="contador-coins">Coins: 0</span>
  </div>

  <div class="container">
    <h1>Atualizar Coins</h1>

    <!-- Seleção da turma -->
    <div class="tabs">
      <button class="tab-button" onclick="setClass('5A')">5°A</button>
      <button class="tab-button" onclick="setClass('5B')">5°B</button>
      <button class="tab-button" onclick="setClass('5C')">5°C</button>
    </div>

    <!-- Upload de alunos -->
    <div class="import-section">
      <label class="upload-label">Importar lista de alunos (.txt):</label>
      <div class="file-upload-wrapper">
        <input type="file" id="fileUpload" accept=".txt" onchange="mostrarNomeArquivo()" />
        <button type="button" onclick="document.getElementById('fileUpload').click()" class="import-button">
          Escolher Arquivo
        </button>
        <span id="nome-arquivo" class="file-name">Nenhum arquivo selecionado</span>
      </div>
      <button class="import-button" onclick="importarAlunos()">Importar Alunos</button>
    </div>

    <!-- Nova seção: Import de dados com coins -->
    <div class="import-section">
      <label class="upload-label">Importar dados com coins (nome + quantidade):</label>
      <div class="file-upload-wrapper">
        <input type="file" id="fileUploadData" accept=".txt" onchange="mostrarNomeArquivoData()" />
        <button type="button" onclick="document.getElementById('fileUploadData').click()" class="import-button">
          Escolher Arquivo
        </button>
        <span id="nome-arquivo-data" class="file-name">Nenhum arquivo selecionado</span>
      </div>
      <button class="import-button" onclick="importarDadosComCoins()">Importar Dados</button>
    </div>

    <!-- Ação em grupo -->
    <div class="group-action">
      <label for="coinsGroup">Valor para todos da turma:</label>
      <input id="coinsGroup" type="number" placeholder="Digite a quantidade" />
      <button onclick="alterarTodos('add')">Adicionar para Todos</button>
      <button onclick="alterarTodos('remove')">Remover de Todos</button>
    </div>

    <!-- Formulário individual -->
    <div class="input-section">
      <label for="name">Nome:</label>
      <div class="autocomplete-container">
        <input id="name" type="text" placeholder="Digite o nome" autocomplete="off" />
        <div id="autocomplete-list" class="autocomplete-list"></div>
      </div>

      <label for="coins">Coins:</label>
      <input id="coins" type="number" placeholder="Digite a quantidade" />

      <div style="display: flex; align-items: center; gap: 0.5rem;">
        <label style="font-size: 0.9rem;">
          <input type="checkbox" id="isNegative" onchange="toggleJustificativa()" />
          Negativo
        </label>
      </div>

      <div id="justificativa-container" style="display: none; margin-top: 1rem;">
        <label for="justificativa">Justificativa pelo negativo:</label>
        <textarea id="justificativa" rows="3" placeholder="Descreva o motivo da penalidade" style="width: 100%; padding: 0.5rem;"></textarea>
      </div>

      <button onclick="saveData()">Salvar</button>
      <button onclick="window.location.href='frontend.html'">Ver Leaderboard</button>
    </div>

    <p class="alert" id="alert"></p>

    <h2>Dados Salvos:</h2>
    <div id="savedData"></div>

    <!-- Histórico -->
    <div class="input-section">
      <label for="pesquisa">Pesquisar histórico por nome:</label>
      <input id="pesquisa" type="text" placeholder="Digite o nome do aluno" />
      <button onclick="mostrarHistorico()">Ver Histórico</button>
    </div>

    <div id="historicoAluno"></div>

    <!-- Exportar -->
    <button id="export-button" onclick="exportToTXT()">Exportar TXT</button>
  </div>

  <script src="js/atualizacao.js"></script>
</body>
</html>
